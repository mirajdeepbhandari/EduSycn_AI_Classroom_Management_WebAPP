<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nepali Calendar - 2024</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .calendar-container {
            background-color: rgba(255, 255, 255, 0.9);
            border-radius: 15px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }
        .card-header {
            background: linear-gradient(to right, #4e54c8, #8f94fb);
        }
        .calendar-day {
            aspect-ratio: 1 / 1;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
            border-radius: 50%;
            font-weight: bold;
        }
        .calendar-day:hover {
            background-color: #e9ecef;
            transform: scale(1.1);
        }
        .calendar-day.today {
            background-color: #4e54c8;
            color: white;
        }
        .calendar-day.selected {
            background-color: #8f94fb;
            color: white;
        }
        .holiday {
            background-color: #ff6b6b;
            color: white;
        }
        .btn-outline-light:hover {
            background-color: rgba(255, 255, 255, 0.2);
        }
        .day-name {
            color: #4e54c8;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="row justify-content-center">
            <div class="col-md-8 col-lg-6">
                <div class="calendar-container">
                    <div class="card">
                        <div class="card-header text-white d-flex justify-content-between align-items-center py-3">
                            <button id="prevMonth" class="btn btn-sm btn-outline-light" aria-label="Previous month">&lt;</button>
                            <h2 id="monthYear" class="mb-0 fs-4"></h2>
                            <button id="nextMonth" class="btn btn-sm btn-outline-light" aria-label="Next month">&gt;</button>
                        </div>
                        <div class="card-body">
                            <div id="calendar" class="d-grid" style="grid-template-columns: repeat(7, 1fr); gap: 10px;"></div>
                        </div>
                        <a href="teacher_landingpage.html" style="text-decoration: none;">
                        <div class="card-footer bg-white border-0 text-center">
                            <button id="backToToday" class="btn btn-primary">Go Back</button>
                        </div>
                    </a>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        const calendar = document.getElementById('calendar');
        const monthYear = document.getElementById('monthYear');
        const prevMonth = document.getElementById('prevMonth');
        const nextMonth = document.getElementById('nextMonth');

        // Initialize currentDate to today's month in 2024, or January if today's year is not 2024
        const today = new Date();
        let currentDate = today.getFullYear() === 2024 ? new Date(today.getFullYear(), today.getMonth()) : new Date(2024, 0);
        let selectedDate = null;

        const nepaliHolidays = {
            '1-1': 'New Year',
            '2-19': 'Losar',
            '3-8': 'International Women\'s Day',
            '4-14': 'Nepali New Year',
            '5-1': 'Labor Day',
            '5-29': 'Republic Day',
            '8-19': 'Teej',
            '9-19': 'Constitution Day',
            '10-15': 'Dashain',
            '11-4': 'Tihar',
            '12-30': 'Tamu Losar'
        };

        function renderCalendar() {
            calendar.innerHTML = '';
            const year = currentDate.getFullYear();
            const month = currentDate.getMonth();

            monthYear.textContent = new Date(year, month, 1).toLocaleString('en-US', { month: 'long', year: 'numeric' });

            const daysInMonth = new Date(year, month + 1, 0).getDate();
            const firstDay = new Date(year, month, 1).getDay();

            // Add day names
            const dayNames = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];
            dayNames.forEach(day => {
                const dayElement = document.createElement('div');
                dayElement.textContent = day;
                dayElement.classList.add('day-name', 'text-center', 'mb-2');
                calendar.appendChild(dayElement);
            });

            // Add empty cells for days before the first day of the month
            for (let i = 0; i < firstDay; i++) {
                calendar.appendChild(document.createElement('div'));
            }

            // Add days of the month
            for (let day = 1; day <= daysInMonth; day++) {
                const dayElement = document.createElement('div');
                dayElement.textContent = day;
                dayElement.classList.add('calendar-day');

                const dateString = `${month + 1}-${day}`;
                if (nepaliHolidays[dateString]) {
                    dayElement.classList.add('holiday');
                    dayElement.title = nepaliHolidays[dateString];
                    dayElement.setAttribute('aria-label', `${day}, ${nepaliHolidays[dateString]}`);
                } else {
                    dayElement.setAttribute('aria-label', `${day}`);
                }

                if (year === 2024 && month === today.getMonth() && day === today.getDate()) {
                    dayElement.classList.add('today');
                }

                if (selectedDate && year === selectedDate.getFullYear() && month === selectedDate.getMonth() && day === selectedDate.getDate()) {
                    dayElement.classList.add('selected');
                }

                dayElement.addEventListener('click', () => {
                    selectedDate = new Date(year, month, day);
                    renderCalendar();
                    console.log('Selected date:', selectedDate.toDateString());
                });

                calendar.appendChild(dayElement);
            }
        }

        prevMonth.addEventListener('click', () => {
            if (currentDate.getFullYear() === 2024 && currentDate.getMonth() > 0) {
                currentDate.setMonth(currentDate.getMonth() - 1);
                renderCalendar();
            }
        });

        nextMonth.addEventListener('click', () => {
            if (currentDate.getFullYear() === 2024 && currentDate.getMonth() < 11) {
                currentDate.setMonth(currentDate.getMonth() + 1);
                renderCalendar();
            }
        });

        document.getElementById('backToToday').addEventListener('click', () => {
            currentDate = new Date(2024, today.getMonth(), today.getDate());
            renderCalendar();
        });

        renderCalendar();
    </script>
</body>
</html>
